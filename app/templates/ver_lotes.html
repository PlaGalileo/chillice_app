{% extends "base.html" %}
{% block title %}Ver Lotes por Fecha{% endblock %}
{% block content %}
<style>
  .tabla-container {
    padding: 30px;
    text-align: center;
  }

  .filtro-form {
    margin-bottom: 25px;
  }

  .filtro-form input[type="date"] {
    padding: 10px;
    font-size: 16px;
    border-radius: 6px;
    border: 1px solid #ccc;
  }

  .filtro-form button {
    padding: 10px 20px;
    background-color: #2C7DA0;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 15px;
    margin-left: 10px;
  }

  table {
    width: 100%;
    max-width: 1100px;
    margin: auto;
    border-collapse: collapse;
    background: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 0 12px rgba(0,0,0,0.1);
  }

  th, td {
    padding: 12px;
    border: 1px solid #ddd;
  }

  th {
    background-color: #0A2463;
    color: white;
  }

  tr:nth-child(even) {
    background-color: #f5f5f5;
  }

  tfoot td {
    font-weight: bold;
    background-color: #DEE5ED;
  }
</style>

<div class="tabla-container">
  <h2 class="seccion-titulo">ðŸ“¦ Lotes Registrados - {{ fecha }}</h2>

  <form method="get" class="filtro-form">
    <label for="fecha">Seleccionar fecha:</label>
    <input type="date" name="fecha" id="fecha" value="{{ fecha }}">
    <button type="submit">Buscar</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>ID Lote</th>
        <th>Fecha y hora</th>
        <th>Turno</th>
        <!-- MODIFICACIÃ“N INICIA -->
        <th>Bolsas 1kg</th>
        <th>Bolsas 3kg</th>
        <!-- MODIFICACIÃ“N TERMINA -->
        <th>Bolsas 5kg</th>
        <th>Bolsas 15kg</th>
        <th>Total (kg)</th>
        <th>CongelaciÃ³n (s)</th>
        <th>Defrost (s)</th>
        <th>Observaciones</th>
      </tr>
    </thead>
    <tbody>
      {% for lote in lotes %}
      <tr>
        <td>{{ lote[0] }}</td>
        <td>{{ lote[1].strftime("%Y-%m-%d %H:%M:%S") }}</td>
        <td>{{ lote[2] }}</td>
        <!-- MODIFICACIÃ“N INICIA -->
        <td>{{ lote[3] }}</td> <!-- 1kg -->
        <td>{{ lote[4] }}</td> <!-- 3kg -->
        <td>{{ lote[5] }}</td> <!-- 5kg -->
        <td>{{ lote[6] }}</td> <!-- 15kg -->
        <td>{{ lote[7] }}</td> <!-- total_kg -->
        <td>{{ lote[8] }}</td> <!-- congelacion -->
        <td>{{ lote[9] }}</td> <!-- defrost -->
        <td style="max-width: 200px; overflow-wrap: break-word;">{{ lote[10] or '' }}</td> <!-- observaciones -->
        <!-- MODIFICACIÃ“N TERMINA -->
      </tr>
      {% endfor %}
    </tbody>
    <tfoot>
      <tr>
        <td colspan="3">Totales</td>
        <!-- MODIFICACIÃ“N INICIA -->
        <td>{{ total_1kg }}</td>
        <td>{{ total_3kg }}</td>
        <!-- MODIFICACIÃ“N TERMINA -->
        <td>{{ total_5kg }}</td>
        <td>{{ total_15kg }}</td>
        <td>{{ total_kg }}</td>
        <td colspan="3"></td>
      </tr>
    </tfoot>
  </table>
</div>
{% endblock %}