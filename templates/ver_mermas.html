{% extends "base.html" %}
{% block title %}Ver Mermas{% endblock %}
{% block content %}
<style>
  .tabla-container { padding: 30px; text-align: center; }
  .filtro-form { margin-bottom: 25px; }
  .filtro-form input[type="month"] { padding: 10px; font-size: 16px; border-radius: 6px; border: 1px solid #ccc; }
  .filtro-form button { padding: 10px 20px; background-color: #2C7DA0; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 15px; margin-left: 10px; }
  table { width: 100%; max-width: 1100px; margin: auto; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 0 12px rgba(0,0,0,0.1); }
  th, td { padding: 12px; border: 1px solid #ddd; }
  th { background-color: #d9534f; color: white; }
  tr:nth-child(even) { background-color: #f5f5f5; }
</style>

<div class="tabla-container">
  <h2 class="seccion-titulo">ðŸ“‰ Mermas Registradas - {{ month_str }}</h2>

  <form method="get" class="filtro-form">
    <label for="month">Seleccionar mes:</label>
    <input type="month" name="month" id="month" value="{{ month_str }}">
    <button type="submit">Buscar</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Fecha y Hora</th>
        <th>TamaÃ±o (kg)</th>
        <th>Bolsas</th>
        <th>Total (kg)</th>
        <th>Comentarios</th>
      </tr>
    </thead>
    <tbody>
      {% for merma in mermas %}
      <tr>
        <td>{{ merma[0] }}</td>
        <td>{{ merma[1].strftime("%Y-%m-%d %H:%M:%S") }}</td>
        <td>{{ merma[2] }} kg</td>
        <td>{{ merma[3] }}</td>
        <td>{{ "%.2f"|format(merma[4]) }}</td>
        <td style="max-width: 200px; overflow-wrap: break-word;">{{ merma[5] or '' }}</td>
      </tr>
      {% endfor %}
      {% if not mermas %}
      <tr>
        <td colspan="6">No se encontraron mermas para este mes.</td>
      </tr>
      {% endif %}
    </tbody>
  </table>
</div>
{% endblock %}